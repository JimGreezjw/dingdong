var dddoctorApp=angular.module("dddoctorApp",["ionic","dddoctorFilters","dddoctorControllers","dddoctorServices","dddoctorDirectives"]);dddoctorApp.run(["$ionicPlatform",function(e){e.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,o){o.templates.maxPrefetch(0),e.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html",controller:"PatientsAllCtrl"}).state("tab.patientsAll",{url:"/patientsAll",views:{"tab-patientsAll":{templateUrl:"templates/tab-patientsAll.html",controller:"PatientsAllCtrl"}}}).state("tab.main",{url:"/main",views:{"tab-main":{templateUrl:"templates/tab-main.html",controller:"MainCtrl"}}}).state("tab.hospitals",{url:"/hospitals",views:{"tab-hospitals":{templateUrl:"templates/hospital/doctor-hospital.html",controller:"DoctorHospitalCtrl"}}}).state("scheduleHospitals",{url:"/scheduleHospitals",templateUrl:"templates/doctorAssistant/doctor-hospital.html",controller:"DoctorHospitalCtrl"}).state("doctor-hospital-detail",{url:"/doctorHospitals/:id/:hospitalId",templateUrl:"templates/hospital/doctor-hospital-detail.html",controller:"DoctorHospitalDetailCtrl"}).state("my-hospital",{url:"/myHospital",templateUrl:"templates/hospital/doctor-hospital-add.html",controller:"DoctorHospitalAddCtrl"}).state("hospital-list",{url:"/hospitalList",templateUrl:"templates/hospital/hospital-list.html",controller:"HospitalListCtrl"}).state("dept-list",{url:"/hospitalDeptList/:hospitalId",templateUrl:"templates/hospital/dept-list.html",controller:"HospitalDeptListCtrl"}).state("tab.patients",{url:"/patientsRegisters",views:{"tab-patientsAll":{templateUrl:"templates/patient/tab-patients-registers.html",controller:"PatientsRegistersCtrl"}}}).state("patients-today",{url:"/patientsToday",templateUrl:"templates/patient/tab-patients-today.html",controller:"PatientsTodayCtrl"}).state("patient-detail",{url:"/patients/:patientId/:registerId/:patientType",templateUrl:"templates/patient/patient-detail.html",controller:"PatientDetailCtrl"}).state("tab.patients-history",{url:"/patientsHistory",views:{"tab-patientsAll":{templateUrl:"templates/patient/tab-patients-history.html",controller:"PatientsHistoryCtrl"}}}).state("tab.patients-history-detail",{url:"/patientHistory/:patientId/:registerId/:patientType",views:{"tab-patientsAll":{templateUrl:"templates/patient/patient-history-detail.html",controller:"PatientDetailCtrl"}}}).state("tab.evaluations",{url:"/evaluations",views:{"tab-patientsAll":{templateUrl:"templates/evaluation/tab-evaluations.html",controller:"EvaluationsCtrl"}}}).state("tab.evaluation-detail",{url:"/evaluation/:evaluationId",views:{"tab-patientsAll":{templateUrl:"templates/evaluation/evaluation-detail.html",controller:"EvaluationDetailCtrl"}}}).state("tab.doctorFuns",{url:"/doctorFuns/:doctorId",views:{"tab-patientsAll":{templateUrl:"templates/funs/tab-funs.html",controller:"DoctorFunsCtrl"}}}).state("tab.schedule-detail-edit",{url:"/schedule/scheduleDetailEdit/:id",views:{"tab-patientsAll":{templateUrl:"templates/schedule/schedule-detail-edit.html",controller:"ScheduleDetailEditCtrl"}}}).state("tab.queueNum",{url:"/queueNum",views:{"tab-patientsAll":{templateUrl:"templates/queue/tab-queues.html",controller:"DoctorQueuesCtrl"}}}).state("tab.funs",{url:"/funs",views:{"tab-patientsAll":{templateUrl:"templates/funs/tab-funs.html",controller:"DoctorFunsCtrl"}}}).state("tab.queues",{url:"/queues/:doctorId",views:{"tab-patientsAll":{templateUrl:"templates/queue/queues-hospital.html",controller:"DoctorQueuesCtrl"}}}).state("tab.postponeSchedule",{url:"/postponeSchedule/:scheduleId",views:{"tab-schedules":{templateUrl:"templates/schedule/postpone-schedule.html",controller:"PostponeScheduleCtrl"}}}).state("tab.schedules",{url:"/schedules",views:{"tab-schedules":{templateUrl:"templates/schedule/tab-schedules.html",controller:"ScheduleCtrl"}}}).state("doctorSchedules",{url:"/schedules",templateUrl:"templates/doctorAssistant/doctorSchedules.html",controller:"ScheduleCtrl"}).state("scheduleDoctorHospitals",{url:"/scheduleDoctorHospitals",templateUrl:"templates/schedule/schedule-doctor-hospital.html",controller:"DoctorHospitalCtrl"}).state("addSchedule",{url:"/schedules/addSchedule/:doctorHospitalId",templateUrl:"templates/schedule/add-schedule.html",controller:"AddScheduleCtrl"}).state("tab.schedule-detail",{url:"/schedules/:selectedDate",views:{"tab-schedules":{templateUrl:"templates/schedule/schedule-detail.html",controller:"ScheduleDetailCtrl"}}}).state("tab.accountAll",{url:"/accountAll",views:{"tab-account":{templateUrl:"templates/account/tab-account.html",controller:"AccountAllCtrl"}}}).state("tab.account",{url:"/account",views:{"tab-account":{templateUrl:"templates/tab-account.html",controller:"AccountCtrl"}}}).state("tab.doctorInformation",{url:"/doctorInformation",views:{"tab-account":{templateUrl:"templates/doctor/doctor-information.html",controller:"DoctorInformationCtrl"}}}).state("tab.doctorRedPackets",{url:"/doctorRedPackets",views:{"tab-account":{templateUrl:"templates/doctor/doctor-registerFee.html",controller:"DoctorInformationCtrl"}}}).state("tab.doctorCode",{url:"/doctorCode",views:{"tab-patientsAll":{templateUrl:"templates/doctor/doctor-code.html",controller:"DoctorCodeCtrl"}}}).state("tab.queueList",{url:"/queueList/:hospitalId",views:{"tab-patientsAll":{templateUrl:"templates/queue/queue-list.html",controller:"QueueListCtrl"}}}).state("tab.funInformation",{url:"/funInformation/:userId",views:{"tab-patientsAll":{templateUrl:"templates/funs/fun-information.html",controller:"FunInformationCtrl"}}}).state("tab.smsValid",{url:"/smsValid",views:{"tab-account":{templateUrl:"templates/smsValid.html",controller:"SmsValidCtrl"}}}).state("tab.smsNow",{url:"/smsNow",views:{"tab-account":{templateUrl:"templates/smsNow.html",controller:"SmsNowCtrl"}}}).state("tab.wxpay",{url:"/wxpay",views:{"tab-account":{templateUrl:"templates/wxpay/tab-wxpay.html",controller:"WxpayCtrl"}}}).state("tab.score",{url:"/score",views:{"tab-account":{templateUrl:"templates/account/tab-score.html",controller:"ScoreCtrl"}}}).state("tab.scoreTerms",{url:"/scoreTerms",views:{"tab-account":{templateUrl:"templates/transfers/score-terms.html",controller:""}}}).state("tab.userTransfer",{url:"/userTransfer/:transferType",views:{"tab-account":{templateUrl:"templates/transfers/user-transfers.html",controller:"UserTransferCtrl"}}}).state("tab.setting",{url:"/setting",views:{"tab-account":{templateUrl:"templates/setting/tab-setting.html",controller:"SettingCtrl"}}}).state("tab.enchashment",{url:"/enchashment",views:{"tab-account":{templateUrl:"templates/wxpay/enchashment.html",controller:"EnchashmentCtrl"}}}).state("tab.accountList",{url:"/accountList",views:{"tab-account":{templateUrl:"templates/transfers/accounts-list.html",controller:"AccountListCtrl"}}}).state("tab.getAccount",{url:"/accountList/:operationType",views:{"tab-account":{templateUrl:"templates/transfers/accounts-list.html",controller:"AccountListCtrl"}}}).state("tab.addAccount",{url:"/addAccount",views:{"tab-account":{templateUrl:"templates/transfers/add-account.html",controller:"AddAccountCtrl"}}}).state("tab.cashApply",{url:"/cashApply",views:{"tab-account":{templateUrl:"templates/wxpay/cashApply.html",controller:""}}}).state("tab.aboutUs",{url:"/aboutUs",views:{"tab-account":{templateUrl:"templates/setting/about-us.html",controller:""}}}).state("tab.terms",{url:"/terms",views:{"tab-account":{templateUrl:"templates/terms.html",controller:""}}}).state("tab.personalInformation",{url:"/personalInformation",views:{"tab-account":{templateUrl:"templates/doctor/personal-information.html",controller:"doctorHeadCtrl"}}}).state("doctorRecommend",{url:"/doctorRecommend",templateUrl:"templates/doctor/doctor-recommend.html",controller:"doctorRecommendCtrl"}).state("doctorList",{url:"/doctorList",templateUrl:"templates/doctor/doctorList.html",controller:"DoctorsCtrl"}).state("navigationTerms",{url:"/navigationTerms",templateUrl:"templates/navigation/terms.html",controller:""}).state("navigation",{url:"/navigation",templateUrl:"templates/navigation/doctor-navigation.html",controller:"navigationCtrl"}).state("smsValidHomePage",{url:"/smsValidHomePage",templateUrl:"templates/smsValidHomePage.html",controller:"SmsValidHomePageCtrl"}).state("assistantDoctors",{url:"/assistantDoctors",templateUrl:"templates/doctorAssistant/assistantDoctors.html",controller:"assistantDoctorCtrl"}).state("doctorFunction",{url:"/doctorFunction",templateUrl:"templates/doctorAssistant/tab-doctorFunction.html",controller:"PatientsAllCtrl"}).state("doctorHead",{url:"/doctorHead",templateUrl:"templates/doctor/doctor-head.html",controller:"doctorHeadCtrl"}),e.state("login",{url:"/login","abstract":!1,templateUrl:"templates/login.html"}),e.state("signIn",{url:"/signIn","abstract":!1,templateUrl:"templates/signInDoctor.html"}),t.otherwise("/tab/patientsAll"),o.backButton.text("").icon("ion-chevron-left"),o.tabs.style("standard"),o.tabs.position("bottom"),o.views.transition("none"),o.scrolling.jsScrolling(!1)}]);var dddoctorControllers=angular.module("dddoctorControllers",["ionic-datepicker","ngCookies"]);dddoctorControllers.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist(/^\s*(https?|local|data|http|weixin):/)}]),dddoctorControllers.controller("MainCtrl",["$scope","$location","$cookies","ddJsConfig","ddDoctorHospitalsServices","doctorInforList",function(e,t,o,r,s,n){!function(){var e=window.location.href;e=e.substring(0,e.indexOf("#")),r.jsConfig({url:e},function(e){var t=e;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","chooseImage","previewImage","uploadImage","downloadImage","chooseWXPay"]})})}();var i=e.ddybUserId=o.get("ddybUserId"),c=e.doctorId=o.get("doctorId");e.ctrlScope=e,n.ddybUserId=i,n.doctorId=c,s.getDoctorHospitals({doctorId:c},function(t){e.hospitals=t.doctorHospitals})}]).controller("PatientsAllCtrl",["$scope","dateFilter","$location","ddPatientRegistersServices","$cookies","doctorUtils","ddPatientServices","ddUserServices","ddPatientHistoryServices","ddGetDoctorFunsServices","doctorInforList","ddDoctorInformationServices",function(e,t,o,r,s,n,i,c,a,d,l,u){e.ctrlScope=e,e.$on("$ionicView.enter",function(n){var i=(t(new Date,"yyyy-MM-dd"),e.ddybUserId=s.get("ddybUserId")),p=e.doctorId=s.get("doctorId"),g=e.ddyzUserId=s.get("ddyzUserId");if(!g||null!=i&&""!=i||null!=p&&""!=p)if(e.haveNews="",e.registerTodayCount=0,p)r.queryDoctor_Registers({id:p},function(t){t.registers&&t.registers.length>0?e.registerCount=t.registers.length:e.registerCount=0}),c.get({userId:i},function(t){e.user=t.users[0],e.ctrlScope.balance=t.users[0].balance,e.ctrlScope.score=t.users[0].score}),a.queryHistory_Registers({id:p,status:-1},function(t){e.queues=t.registers,e.queues&&e.queues.length>0&&(e.queueNum=e.queues.length)}),d.getDoctorFuns({doctorId:p},function(t){e.doctorFans=t.doctorFans,e.doctorFans&&e.doctorFans.length>0&&(e.funsNum=e.doctorFans.length)}),u.get({id:p},function(t){e.doctor=t.doctors[0],e.ctrlScope.name=t.doctors[0].name,e.ctrlScope.gender=t.doctors[0].gender,e.ctrlScope.level=t.doctors[0].level});else if(p=l.doctorId){r.queryDoctor_Registers({id:p},function(t){t.registers&&t.registers.length>0?e.registerCount=t.registers.length:e.registerCount=0}),c.get({userId:i},function(t){e.user=t.users[0],e.ctrlScope.balance=t.users[0].balance,e.ctrlScope.score=t.users[0].score});var m="/tab/patientsAll";o.url(m)}else{var f="/smsValidHomePage";o.url(f)}else{var h="/assistantDoctors";o.url(h)}})}]).controller("HospitalDetailCtrl",["$scope","$stateParams","$ionicPopup","$filter","ddHospitalServices","dateFilter",function(e,t,o,r,s,n){e.hospital=s.get(t.hospitalId),e.expanderTitle="医院简介",e.showConfirm=function(t){var r='<h4 style=" text-align:center;">'+e.hospital.fullName+"</h4>",s=o.confirm({title:"<h4 >确定申请坐诊吗？</h4>",template:r,cancelText:"取消",okText:"确定"});s.then(function(e){e?console.log("确定申请"):console.log("取消")})}}]).controller("DoctorInformationCtrl",["$scope","$ionicPopup","$cookies","$ionicPopover","$location","doctorUtils","ddDoctorInformationServices","ddUpdateDoctorInformationServices",function(e,t,o,r,s,n,i,c){var a=(n.getCookies("ddybUserId"),n.getCookies("doctorId"));e.ctrlScope=e,i.get({id:a},function(t){e.doctor=t.doctors[0],e.ctrlScope.name=t.doctors[0].name,e.ctrlScope.gender=t.doctors[0].gender,e.ctrlScope.hospitalName=t.doctors[0].hospitalName,e.ctrlScope.level=t.doctors[0].level,e.ctrlScope.specialty=t.doctors[0].specialty,e.ctrlScope.introduction=t.doctors[0].introduction,e.ctrlScope.registerFee=t.doctors[0].registerFee}),showQueue=function(e){var o=t.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});o.then(function(t){console.log(e)})},e.showConfirmeSave=function(o){var r='<h4 style=" text-align:center;">'+o+"</h4>",n=t.confirm({title:"<h4 >确定保存吗？</h4>",template:r,cancelText:"取消",okText:"确定"});n.then(function(t){if(t){var o=null;o={hospitalName:e.ctrlScope.hospitalName,level:e.ctrlScope.level,specialty:e.ctrlScope.specialty,introduction:e.ctrlScope.introduction},c.updateDoctorInformation({id:a},o),console.log("完成");var r;r="/tab/personalInformation",showQueue("保存成功！"),s.url(r)}else console.log("取消")})}}]).controller("DoctorsCtrl",["$scope","$rootScope","$ionicPopover","$cookies","$location","$ionicHistory","$timeout","doctorUtils","doctorServices","getUnSignedDoctorsServices","doctorInforList",function(e,t,o,r,s,n,i,c,a,d,l){e.ctrlScope=e,l.getDoctor=null,e.$on("$ionicView.enter",function(e){l.getDoctor&&n.goBack(-1)}),e.getDoctor=function(e){l.getDoctor=e,n.goBack(-1)},vm=e.vm={search:function(){vm.query?d.getUnSignedDoctors({doctorName:vm.query},function(e){vm.doctors=e.doctors}):vm.doctors=null}};c.getCookies("ddybUserId"),c.getCookies("doctorId")}]).controller("navigationCtrl",["$scope","$ionicPopup","$ionicPopover","$cookies","$location","doctorUtils","ddDoctorInformationServices","submitSignDoctorsterServices","doctorInforList",function(e,t,o,r,s,n,i,c,a){e.ctrlScope=e;var d=n.getCookies("ddybUserId");n.getCookies("doctorId");e.getDoctor=function(){var e="/doctorList";s.url(e)},e.$on("$ionicView.enter",function(){a.getDoctor&&(e.ctrlScope.name=a.getDoctor.name,e.ctrlScope.id=a.getDoctor.id);var t=sessionStorage.getItem("alreadySubmitSign");"y"==t&&(e.showsHide=!0)}),showQueue=function(e){var o=t.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});o.then(function(t){console.log(e)})},e.showConfirmeSave=function(o){if(null==e.ctrlScope.name)showQueue("请选择入驻人!");else{var r=/^((0\d{2,3}))(-(\d{7,8}))(-(\d{3,}))?$/;if(r.test(e.ctrlScope.officeTele)){var s='<h4 style=" text-align:center;">'+e.ctrlScope.name+"<br/>"+e.ctrlScope.officeTele+"</h4>",n=t.confirm({title:"<h4 >确定提交申请吗？</h4>",template:s,cancelText:"取消",okText:"确定"});n.then(function(t){if(t){var o=null;o={id:e.ctrlScope.id,userId:d,officeTele:e.ctrlScope.officeTele},c.submitSign({id:e.ctrlScope.id,userId:d,officeTele:e.ctrlScope.officeTele},function(t){"OK"==t.responseDesc?showQueue("申请提交成功,工作人员会及时与您联系！"):showQueue(t.responseDesc),e.ctrlScope.officeTele=null,e.ctrlScope.name=null,e.ctrlScope.id=null}),console.log("完成")}else console.log("取消")})}else showQueue("请检查科室固话是否输入正确！")}}}]).controller("SettingCtrl",["$scope","$ionicPopup","$ionicPopover","$cookies","$location","doctorUtils","ddDoctorInformationServices","submitSignDoctorsterServices","doctorInforList",function(e,t,o,r,s,n,i,c,a){e.ctrlScope=e;n.getCookies("ddybUserId"),n.getCookies("doctorId");e.eliminate=function(){n.setCookie("ddybUserId","",null,"/",null),n.setCookie("doctorId","",null,"/",null),showQueue("成功清除缓存！")},showQueue=function(e){var o=t.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});o.then(function(t){console.log(e)})},e.aboutUs=function(){var e="/tab/aboutUs";s.url(e)}}]).controller("QueueListCtrl",["$scope","$timeout","$cookies","$stateParams","$ionicPopover","doctorUtils","ddRegistersByDoctorIdAndStatusServices",function(e,t,o,r,s,n,i){var c=(n.getCookies("ddybUserId"),n.getCookies("doctorId"));e.ctrlScope=e,e.$on("$ionicView.enter",function(t){i.getRegistersByDoctorIdAndStatus({doctorId:c,hospitalId:r.hospitalId,status:-1},function(t){e.queues=t.registers})}),e.doRefresh=function(){console.log("Refreshing!"),t(function(){i.getRegistersByDoctorIdAndStatus({doctorId:c,hospitalId:r.hospitalId,status:-1},function(t){e.queues=t.registers}),e.$broadcast("scroll.refreshComplete")},1e3)}}]).controller("DoctorQueuesCtrl",["$scope","$timeout","$cookies","$ionicPopover","doctorUtils","ddGetDoctorQueuesServices","ddDoctorHospitalsServices","ddPatientHistoryServices",function(e,t,o,r,s,n,i,c){var a=(s.getCookies("ddybUserId"),s.getCookies("doctorId"));e.ctrlScope=e,e.$on("$ionicView.enter",function(t){i.getDoctorHospitals({doctorId:a},function(t){e.queuesHospitals=t.doctorHospitals,e.queuesHospitals&&e.queuesHospitals.length>0?e.showOrNot=!1:e.showOrNot=!0}),c.queryHistory_Registers({id:a,status:-1},function(t){e.queues=t.registers,e.ctrlScope.queueNum=0,e.queues&&e.queues.length>0?(e.ctrlScope.queueNum=t.registers.length,e.showOrNot=!1):e.showOrNot=!0})}),e.doRefresh=function(){console.log("Refreshing!"),t(function(){c.queryHistory_Registers({id:a,status:-1},function(t){e.queues=t.registers,e.ctrlScope.queueNum=0,e.queue=t.queues[0],e.queues&&e.queues.length>0?(e.ctrlScope.queueNum=t.registers.length,e.showOrNot=!1):e.showOrNot=!0}),e.$broadcast("scroll.refreshComplete")},1e3)}}]).controller("DoctorFunsCtrl",["$scope","$timeout","$cookies","$stateParams","$ionicPopover","doctorUtils","ddUserServices","ddGetDoctorFunsServices",function(e,t,o,r,s,n,i,c){var a=(n.getCookies("ddybUserId"),n.getCookies("doctorId"));e.$on("$ionicView.enter",function(o){var r=e.vm={moredata:!1,doctors:[],pagination:{perPage:15,currentPage:1},init:function(){c.getDoctorFuns({doctorId:a,size:r.pagination.perPage,page:r.pagination.currentPage,order:"id",orderBy:"ASC"},function(t){r.doctorFansNum=t.doctorFans.length,r.doctorFans=t.doctorFans,angular.forEach(r.doctorFans,function(e,t,o){i.get({userId:o[t].userId},function(e){r.patient=e.users[0],r.doctorFans[t].headImgUrl=e.users[0].headImgUrl,r.doctorFans[t].fansName=e.users[0].name,r.doctorFans[t].fansAddress=e.users[0].address,r.doctorFans[t].fansGender=e.users[0].gender,r.doctorFans[t].userId=o[t].userId,r.doctorFans[t].country=e.users[0].country,r.doctorFans[t].province=e.users[0].province,r.doctorFans[t].city=e.users[0].city})}),r.doctorFans&&r.doctorFans.length>0?e.ctrlScope.showOrNot=!1:e.ctrlScope.showOrNot=!0})},doRefresh:function(){console.log("Refreshing!"),t(function(){c.getDoctorFuns({doctorId:a,size:15,page:1,order:"id",orderBy:"ASC"},function(e){r.doctorFans=e.doctorFans,r.doctorFansNum=e.doctorFans.length,angular.forEach(r.doctorFans,function(e,t,o){i.get({userId:o[t].userId},function(e){r.patient=e.users[0],r.doctorFans[t].headImgUrl=e.users[0].headImgUrl,r.doctorFans[t].fansName=e.users[0].name,r.doctorFans[t].fansAddress=e.users[0].address,r.doctorFans[t].fansGender=e.users[0].gender})})}),e.$broadcast("scroll.refreshComplete")},1e3)},loadMore:function(){r.pagination.currentPage+=1,r.moredata&&c.getDoctorFuns({doctorId:a,size:r.pagination.perPage,page:r.pagination.currentPage,order:"id",orderBy:"ASC"},function(t){r.doctorFans=r.doctorFans.concat(t.doctorFans),t.doctorFans&&0==t.doctorFans.length&&(r.moredata=!1),t.pages<=r.pagination.currentPage+1&&(r.moredata=!1),e.$broadcast("scroll.infiniteScrollComplete"),angular.forEach(r.doctorFans,function(e,t,o){i.get({userId:o[t].userId},function(e){r.patient=e.users[0],r.doctorFans[t].headImgUrl=e.users[0].headImgUrl,r.doctorFans[t].fansName=e.users[0].name,r.doctorFans[t].fansAddress=e.users[0].address,r.doctorFans[t].fansGender=e.users[0].gender})})})}};r.init()})}]).controller("PatientsRegistersCtrl",["$scope","$timeout","$cookies","$ionicPopover","doctorUtils","ddUserServices","ddPatientRegistersServices",function(e,t,o,r,s,n,i){var c=(s.getCookies("ddybUserId"),s.getCookies("doctorId"));e.$on("$ionicView.enter",function(t){i.queryDoctor_Registers({id:c},function(t){e.patients=t.registers,angular.forEach(e.patients,function(t,o,r){n.get({userId:r[o].userId},function(t){e.patient=t.users[0],e.patients[o].headImgUrl=t.users[0].headImgUrl})}),e.patients&&e.patients.length>0?e.showOrNot=!1:e.showOrNot=!0})}),e.doRefresh=function(){console.log("Refreshing!"),t(function(){i.queryDoctor_Registers({id:c},function(t){e.patients=t.registers,angular.forEach(e.patients,function(t,o,r){n.get({userId:r[o].userId},function(t){e.patient=t.users[0],e.patients[o].headImgUrl=t.users[0].headImgUrl})})}),e.$broadcast("scroll.refreshComplete")},1e3)}}]).controller("PatientsTodayCtrl",["$scope","$ionicPopover","$cookies","$timeout","$stateParams","$ionicHistory","doctorUtils","ddPatientServices","ddPatientRegistersServices","ddUserServices","dateFilter",function(e,t,o,r,s,n,i,c,a,d,l){var u=l(new Date,"yyyy-MM-dd"),p=(i.getCookies("ddybUserId"),i.getCookies("doctorId"));e.goBack=function(){n.goBack(-1)};var g="0";e.showPatient0="button  button-positive ",e.showPatient1="button",e.$on("$ionicView.enter",function(t){"0"==g?(e.showPatient0="button  button-positive",e.showPatient1="button",c.queryMyPatient_Hos_Date({id:p,scheduleDate:u},function(t){e.patients=t.registers,e.patients&&e.patients.length>0?e.showOrNot=!1:e.showOrNot=!0,a.queryDoctor_Registers({id:p},function(t){t.registers&&t.registers.length>0?e.registerCount=t.registers.length:e.registerCount=0})})):(e.showPatient0="button",e.showPatient1="button button-positive",a.queryDoctor_Registers({id:p},function(t){e.patients=t.registers,e.patients&&e.patients.length>0?(e.showOrNot=!1,e.registerCount=e.patients.length):e.showOrNot=!0}))}),e.showPatient=function(t){"0"==t?(g="0",e.showPatient1="button",e.showPatient0="button button-positive",e.calendarHide=!0,e.showsHide=!0,c.queryMyPatient_Hos_Date({id:p,scheduleDate:u},function(t){e.patients=t.registers,e.patients&&e.patients.length>0?e.showOrNot=!1:e.showOrNot=!0})):(g="1",e.showPatient0="button",e.showPatient1="button button-positive",a.queryDoctor_Registers({id:p},function(t){e.patients=t.registers,e.patients&&e.patients.length>0?(e.showOrNot=!1,e.registerCount=e.patients.length):e.showOrNot=!0}))},e.doRefresh=function(){console.log("Refreshing!"),r(function(){"0"==g?(e.showPatient0="button  button-positive",e.showPatient1="button",c.queryMyPatient_Hos_Date({id:p,scheduleDate:u},function(t){e.patients=t.registers,e.patients&&e.patients.length>0?e.showOrNot=!1:e.showOrNot=!0})):(e.showPatient0="button",e.showPatient1="button button-positive",a.queryDoctor_Registers({id:p},function(t){e.patients=t.registers,angular.forEach(e.patients,function(t,o,r){d.get({userId:r[o].userId},function(t){e.patient=t.users[0],e.patients[o].headImgUrl=t.users[0].headImgUrl})}),e.patients&&e.patients.length>0?e.showOrNot=!1:e.showOrNot=!0})),e.$broadcast("scroll.refreshComplete")},1e3)}}]).controller("PatientsHistoryCtrl",["$scope","$timeout","$cookies","$ionicHistory","$ionicPopover","doctorUtils","ddUserServices","ddPatientHistoryServices",function(e,t,o,r,s,n,i,c){var a=(n.getCookies("ddybUserId"),n.getCookies("doctorId"));e.goBack=function(){r.goBack(-1)},e.$on("$ionicView.enter",function(t){c.queryHistory_Registers({id:a,status:3},function(t){e.patients=t.registers,c.queryHistory_Registers({id:a,status:5},function(t){e.patients=e.patients.concat(t.registers),e.patients&&e.patients.length>0?e.showOrNot=!1:e.showOrNot=!0})})}),e.doRefresh=function(){console.log("Refreshing!"),t(function(){c.queryHistory_Registers({id:a,status:3},function(t){e.patients=t.registers,c.queryHistory_Registers({id:a,status:5},function(t){e.patients=e.patients.concat(t.registers),e.patients&&e.patients.length>0?e.showOrNot=!1:e.showOrNot=!0})}),e.$broadcast("scroll.refreshComplete")},1e3)}}]).controller("PatientDetailCtrl",["$scope","$stateParams","$ionicHistory","$location","$ionicPopup","$filter","getDoctorEvalsByRegisterServices","ddPatientDetailServices","ddRegistersServices","ddUserServices","ddPatientCondServices","ddPatientFinishTreatmentServices","dateFilter",function(e,t,o,r,s,n,i,c,a,d,l,u,p){c.get({patientId:t.patientId},function(t){e.patient=t.patients[0]}),"patientsRegisters"==t.patientType?e.showsHideButton=!0:e.showsHideButton=!1,a.get({id:t.registerId},function(t){e.register=t.registers[0],e.register.attachUrls?(e.showOrNot=!1,e.yusFiles=e.register.attachUrls.split(",")):e.showOrNot=!0}),e.bigImage=!1,e.hideBigImage=function(){e.bigImage=!1},e.shouBigImage=function(t){e.Url=t,e.bigImage=!0},i.getDoctorEvalsByRegisterId({registerId:t.registerId},function(t){e.doctorEvals=t.doctorEvals}),e.expanderTitle="病情简介",e.goBack=function(){o.goBack(-1)},showQueue=function(e){var t=s.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.showConfirm=function(o){var n='<h4 style=" text-align:center;">您确定已完成患者 '+e.patient.name+" 的诊疗吗？</h4>",i=s.confirm({title:"<h4 >完成诊疗确认</h4>",template:n,cancelText:"取消",okText:"确定"});i.then(function(e){e?(u.finishTreatment({registerId:t.registerId},function(e){var t="/patientsToday";r.url(t);var o="诊疗完成。恭喜您获得"+e.bonusScore+"个咚咚币，辛苦了！";showQueue(o)}),console.log("完成")):console.log("取消")})},e.showPopup=function(){e.data={};s.show({template:'评分：<input type="number" ng-model="data.evaluationScore"><br>评语：<input type="text" ng-model="data.evaluationDesc">',title:"请输入评语",subTitle:"请公正客观的进行评价！",scope:e,buttons:[{text:"取消"},{text:"<b>保存</b>",type:"button-positive",onTap:function(t){return e.data.evaluationScore||e.data.evaluationDesc?e.data.evaluationScore+!e.data.evaluationDesc:void t.preventDefault()}}]})}}]).controller("DoctorHospitalCtrl",["$scope","$ionicHistory","$ionicPopover","$cookies","$stateParams","$timeout","doctorUtils","ddDoctorHospitalsServices","ddDeleteDoctorHospitalServices",function(e,t,o,r,s,n,i,c,a){var d=(i.getCookies("ddybUserId"),i.getCookies("doctorId"));e.$on("$ionicView.enter",function(t){c.getDoctorHospitals({doctorId:d},function(t){e.hospitals=t.doctorHospitals})}),e.goBack=function(){t.goBack(-1)},e.doRefresh=function(){console.log("Refreshing!"),n(function(){c.getDoctorHospitals({doctorId:d},function(t){e.hospitals=t.doctorHospitals}),e.$broadcast("scroll.refreshComplete")},1e3)},e.remove=function(t){a.deleteDoctorHospital({id:t.id},function(t){c.getDoctorHospitals({doctorId:d},function(t){e.hospitals=t.doctorHospitals})}),console.log("完成")}}]).controller("HospitalListCtrl",["$scope","$ionicPopover","$cookies","$ionicHistory","$stateParams","$timeout","doctorUtils","ddHospitalsServices","ddHospitalsByFilterTextServices","doctorInforList",function(e,t,o,r,s,n,i,c,a,d){e.ctrlScope=e,e.$on("$ionicView.enter",function(e){d.getDept=null});var l=e.vm={moredata:!0,hospitals:[],pagination:{perPage:15,currentPage:1},afterInit:!1,init:function(){c.getHospitals({size:l.pagination.perPage,page:l.pagination.currentPage,orderBy:"name",order:"ASC"},function(e){l.hospitals=e.hospitals,l.afterInit=!0,e.pages<=l.pagination.currentPage+1&&(l.moredata=!1)})},doRefresh:function(){n(function(){e.$broadcast("scroll.refreshComplete")},1e3)},loadMore:function(){l.pagination.currentPage+=1,l.moredata&&l.afterInit&&c.getHospitals({size:l.pagination.perPage,page:l.pagination.currentPage,orderBy:"name",order:"ASC"},function(t){l.hospitals=l.hospitals.concat(t.hospitals),t.hospitals&&0==t.hospitals.length&&(l.moredata=!1),t.pages<=l.pagination.currentPage+1&&(l.moredata=!1),e.$broadcast("scroll.infiniteScrollComplete")})}};l.init();i.getCookies("ddybUserId"),i.getCookies("doctorId");e.vm.getHospital=function(e){d.getHospital=e,r.goBack(-1)}}]).controller("HospitalDeptListCtrl",["$scope","$cookies","$ionicPopover","$ionicHistory","$stateParams","$timeout","doctorUtils","ddHospitalDeptsServices","doctorInforList",function(e,t,o,r,s,n,i,c,a){e.ctrlScope=e,e.$on("$ionicView.enter",function(t){a.getDept=null,e.goBack=function(){r.goBack(-1)}});var d=e.vm={moredata:!0,hospitalDepts:[],pagination:{perPage:15,currentPage:1},afterInit:!1,init:function(){c.getHospitalDepts({id:s.hospitalId,size:d.pagination.perPage,page:d.pagination.currentPage},function(e){d.hospitalDepts=e.hospitalDepts,d.afterInit=!0,e.pages<=d.pagination.currentPage+1&&(d.moredata=!1)})},doRefresh:function(){n(function(){e.$broadcast("scroll.refreshComplete")},1e3)},loadMore:function(){d.pagination.currentPage+=1,d.moredata&&d.afterInit&&c.getHospitalDepts({id:s.hospitalId,size:d.pagination.perPage,page:d.pagination.currentPage},function(t){d.hospitalDepts=d.hospitalDepts.concat(t.hospitalDepts),t.hospitalDepts&&0==t.hospitalDepts.length&&(d.moredata=!1),t.pages<=d.pagination.currentPage+1&&(d.moredata=!1),e.$broadcast("scroll.infiniteScrollComplete")})}};d.init();i.getCookies("ddybUserId"),i.getCookies("doctorId");e.vm.getDept=function(e){a.getDept=e,r.goBack(-1)}}]).controller("DoctorHospitalAddCtrl",["$scope","$location","$ionicPopover","$ionicPopup","doctorUtils","ddAddDoctorHospitalServices","doctorInforList",function(e,t,o,r,s,n,i){e.ctrlScope=e,showQueue=function(e){var t=r.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.getHospital=function(){var e="/hospitalList";t.url(e)},e.getDept=function(e){if(e){var o="/hospitalDeptList/"+e;t.url(o)}else showQueue("请先选择医院！")},e.$on("$ionicView.enter",function(){e.ctrlScope.hospitalName="",e.ctrlScope.hospitalId="",e.ctrlScope.deptName="",e.ctrlScope.deptId="",i.getHospital&&(e.ctrlScope.hospitalName=i.getHospital.name,e.ctrlScope.hospitalId=i.getHospital.id),i.getDept&&i.getHospital&&(e.ctrlScope.deptName=i.getDept.deptName,e.ctrlScope.deptId=i.getDept.deptId)}),e.showConfirmeAdd=function(o){if(null==e.ctrlScope.hospitalName||null==e.ctrlScope.deptName||null==e.ctrlScope.minQueue||null==e.ctrlScope.registerFee)showQueue("请补充完各项信息！");else{var i='<h4 style=" text-align:center;">'+e.ctrlScope.hospitalName+e.ctrlScope.deptName+"</h4>",c=r.confirm({title:"<h4 >确定添加吗？</h4>",template:i,cancelText:"取消",okText:"确定"});c.then(function(o){if(o){var r=null,i=(s.getCookies("ddybUserId"),s.getCookies("doctorId"));r={deptId:e.ctrlScope.deptId,deptName:e.ctrlScope.deptName,doctorId:i,hospitalId:e.ctrlScope.hospitalId,hospitalName:e.ctrlScope.hospitalName,minQueue:e.ctrlScope.minQueue,registerFee:e.ctrlScope.registerFee,requestStatus:0},n.addDoctorHospital({},r),console.log(r);var c="/scheduleHospitals";t.url(c)}else console.log("取消")})}}}]).controller("EnchashmentCtrl",["$scope","$location","$ionicPopover","$ionicPopup","ddAddDoctorHospitalServices","ddDoctorCashApplyServices","doctorInforList",function(e,t,o,r,s,n,i){e.ctrlScope=e,showQueue=function(e){var t=r.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.getCard=function(){var e="/tab/accountList/getCard";t.url(e)},e.$on("$ionicView.enter",function(){e.ctrlScope.bankName="",e.ctrlScope.cardNumber="",e.ctrlScope.cardName="",i.card&&(e.ctrlScope.bankName=i.card.bankName,e.ctrlScope.cardNumber=i.card.cardNumber,e.ctrlScope.cardName=i.card.cardName)}),e.cashApply=function(o){if(null==e.ctrlScope.bankName||null==e.ctrlScope.cardNumber||null==e.ctrlScope.cardName)showQueue("请补充完各项信息！");else{var s='<h4 style=" text-align:center;">'+e.ctrlScope.bankName+"<br/>"+e.ctrlScope.cardNumber+"<br/>"+e.ctrlScope.cardName+"</h4>",c=r.confirm({title:"<h4 >确定提交取现申请吗？</h4>",template:s,cancelText:"取消",okText:"确定"});c.then(function(o){o?n.postCashApply({accountId:i.card.id,amount:e.ctrlScope.amount},function(e){showQueue(e.responseDesc);var o="/tab/wxpay";t.url(o)}):console.log("取消")})}}}]).controller("DoctorHospitalDetailCtrl",["$scope","$cookies","$stateParams","$ionicHistory","$location","$ionicPopup","$ionicPopover","$filter","doctorUtils","doctorInforList","ddUpdateDoctorHospitalStatusServices","ddDoctorHospitalDetailServices","ddUpdateDoctorHospitalServices",function(e,t,o,r,s,n,i,c,a,d,l,u,p){
e.ctrlScope=e;a.getCookies("ddybUserId"),a.getCookies("doctorId");u.get({id:o.id},function(t){e.hospital=t.doctorHospitals[0],e.ctrlScope.minQueue=t.doctorHospitals[0].minQueue,e.ctrlScope.registerFee=t.doctorHospitals[0].registerFee,e.ctrlScope.mainFlag=t.doctorHospitals[0].mainFlag,e.ctrlScope.deptId=t.doctorHospitals[0].deptId,e.ctrlScope.deptName=t.doctorHospitals[0].deptName,e.ctrlScope.requestDesc=t.doctorHospitals[0].requestDesc,e.ctrlScope.registerStatus=c("hospitalFilter")(t.doctorHospitals[0].status)}),e.$on("$ionicView.enter",function(){d.getDept&&(e.ctrlScope.deptName=d.getDept.deptName,e.ctrlScope.deptId=d.getDept.deptId),e.goBack=function(){r.goBack(-1)}}),showQueue=function(e){var t=n.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.showConfirmSave=function(t){p.updateDoctorHospital({id:o.id,deptName:e.ctrlScope.deptName,minQueue:e.ctrlScope.minQueue,registerFee:e.ctrlScope.registerFee,status:c("hospitalRevFilter")(e.ctrlScope.registerStatus)},function(e){showQueue("保存成功!"),s.url("/scheduleHospitals")})},e.getDept=function(){if(o.hospitalId){var e="/hospitalDeptList/"+o.hospitalId;s.url(e)}else showQueue("请先选择医院！")}}]).controller("EvaluationsCtrl",["$scope","$ionicPopover","ddEvaluationServices",function(e,t,o){e.patients=o.getEvaluationsByDoctor();var r=o.getEvaluationsByDoctor();r.then(function(t){e.evaluations=t},function(t){e.evaluations={error:"找不到评价信息！"}})}]).controller("EvaluationDetailCtrl",["$scope","$stateParams","$ionicPopup","$filter","ddEvaluationServices","dateFilter",function(e,t,o,r,s,n){e.evaluation=s.get(t.evaluationId),e.expanderTitle="评价内容：",e.showPopup=function(){e.data={};o.show({template:'评分：<input type="number" ng-model="data.evaluationScore"><br>评语：<input type="text" ng-model="data.evaluationDesc">',title:"请输入评语",subTitle:"请公正客观的进行评价！",scope:e,buttons:[{text:"取消"},{text:"<b>保存</b>",type:"button-positive",onTap:function(t){return e.data.evaluationScore||e.data.evaluationDesc?e.data.evaluationScore+!e.data.evaluationDesc:void t.preventDefault()}}]})}}]).controller("ScheduleCtrl",["$scope","$ionicHistory","$timeout","$cookies","$location","$rootScope","$stateParams","$filter","$ionicPopup","doctorUtils","dateFilter","ddPostponeScheduleByIdServices","ddDoctorSchedulesServices","ddDoctorScheduleDatesServices",function(e,t,o,r,s,n,i,c,a,d,l,u,p,g){e.ctrlScope=e;new Date;e.calendar={},e.calendar.mode="month",sessionStorage.setItem("currentDate",v);var m=(d.getCookies("ddybUserId"),d.getCookies("ddyzUserId")),f=d.getCookies("doctorId"),h=(e.schduleDateList=[],new Date),v=l(h,"yyyy-MM-dd"),S=new Date(h.valueOf()+2592e6),I=l(S,"yyyy-MM-dd");sessionStorage.setItem("currentDate",v),e.shows=!0,e.goBack=function(){t.goBack(-1)},e.$on("$ionicView.enter",function(t){null==m||""==m?e.addHide=!0:e.addHide=!1,e.scheduleType0="button",e.scheduleType1="button button-positive",e.calendarHide=!1,g.getDoctorScheduleDates({doctorId:f,beginDate:v,endDate:I},function(t){e.schedules=e.schduleDateList=t.schduleDateList,e.showsHide=!0;var o=sessionStorage.getItem("currentDate");"undefined"!=o&&p.getDoctorSchedules({doctorId:f,beginDate:o,endDate:o},function(t){e.showsHide=!1,e.schedules=t.schedules})})}),e.showSchedule=function(t){"0"==t?(e.scheduleType1="button",e.scheduleType0="button button-positive",e.calendarHide=!0,e.showsHide=!0,p.getDoctorSchedules({doctorId:f,beginDate:v,endDate:I},function(t){e.schedules=t.schedules,e.showsHide=!1})):(e.scheduleType0="button",e.scheduleType1="button button-positive",e.calendarHide=!1,g.getDoctorScheduleDates({doctorId:f,beginDate:v,endDate:I},function(t){e.schedules=e.schduleDateList=t.schduleDateList,e.showsHide=!0;var o=sessionStorage.getItem("currentDate");"undefined"!=o&&p.getDoctorSchedules({doctorId:f,beginDate:o,endDate:o},function(t){e.showsHide=!1,e.schedules=t.schedules})}))},p.getDoctorSchedules({doctorId:f,beginDate:v,endDate:v},function(t){e.schedules=t.schedules});var y=h,$=l(y,"yyyy-MM-dd");e.onTimeSelected=function(t){y=t,$=l(t,"yyyy-MM-dd"),e.timeTitle=$,$>=v&&p.getDoctorSchedules({doctorId:f,beginDate:$,endDate:$},function(t){e.showsHide=!1,e.schedules=t.schedules}),sessionStorage.setItem("currentDate",$)},e.onEventSelected=function(e){console.log("Event selected:"+e.startTime+"-"+e.endTime+","+e.title)},e.onTimeTitleChanged=function(t){e.timeTitle=t},showQueue=function(e){var t=a.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.showConfirmeAdd=function(e){if($>=v&&y.valueOf()-h.valueOf()<2592e6){var t="/scheduleDoctorHospitals";s.url(t)}else showQueue("请添加30天以内的行程！")},e.delaychedule=function(e){var t="tab/postponeSchedule/"+e.id;s.url(t)}}]).controller("AddScheduleCtrl",["$scope","$ionicHistory","$filter","$location","$ionicPopover","$ionicPopup","$stateParams","doctorUtils","ddAddScheduleServices","ddDoctorHospitalDetailServices",function(e,t,o,r,s,n,i,c,a,d){e.ctrlScope=e,e.timeSlotList=[{name:"全天",value:0},{name:"上午",value:1},{name:"下午",value:2},{name:"晚上",value:3}],e.datepickerObject={setButtonType:"button-assertive",inputDate:sessionStorage.getItem("currentDate"),mondayFirst:!0,templateType:"modal",showTodayButton:"true",modalHeaderColor:"bar-positive",modalFooterColor:"bar-positive",from:new Date(1910,8,2),to:new Date(2030,8,25),callback:function(e){datePickerCallback(e)}};var l=null;d.get({id:i.doctorHospitalId},function(t){e.hospital=t.doctorHospitals[0],e.ctrlScope.minQueue=t.doctorHospitals[0].minQueue,e.ctrlScope.registerFee=t.doctorHospitals[0].registerFee,e.ctrlScope.deptName=t.doctorHospitals[0].deptName,e.ctrlScope.hospitalName=t.doctorHospitals[0].hospitalName,e.ctrlScope.timeSlot=0,l=t.doctorHospitals[0]}),e.goBack=function(){t.goBack(-1)},e.showConfirmeAdd=function(t){var s='<h4 style=" text-align:center;">'+l.hospitalName+"<br/>"+o("dateTranfer")(sessionStorage.getItem("currentDate"))+o("timeSlot")(e.ctrlScope.timeSlot)+"</h4>",i=n.confirm({title:"<h4 >您确定添加如下行程吗？</h4>",template:s,cancelText:"取消",okText:"确定"});i.then(function(t){if(t){var o=null,s=c.getCookies("ddybUserId"),n=c.getCookies("doctorId"),i=c.getCookies("ddyzUserId"),d=i;null!=i&&""!=i||(d=s);var u=l.hospitalId;o={doctorId:n,hospitalId:u,issueNum:e.ctrlScope.minQueue,scheduleDate:sessionStorage.getItem("currentDate"),timeSlot:e.ctrlScope.timeSlot,creatorId:d},a.addSchedule({doctorId:n,hospitalId:u,issueNum:e.ctrlScope.minQueue,scheduleDate:sessionStorage.getItem("currentDate"),timeSlot:e.ctrlScope.timeSlot,creatorId:d},function(e){if(showQueue("添加成功!"),console.log(o),null==i||""==i){var t="tab/schedules";r.url(t)}else{var t="/schedules";r.url(t)}})}else console.log("取消")})}}]).controller("PostponeScheduleCtrl",["$scope","$filter","$location","$ionicHistory","$ionicPopover","$ionicPopup","$stateParams","dateFilter","ddAddScheduleServices","ddDoctorHospitalDetailServices","ddPostponeScheduleServices",function(e,t,o,r,s,n,i,c,a,d,l){e.ctrlScope=e;new Date;e.goBack=function(){r.goBack(-1)},e.datepickerObject={setButtonType:"button-assertive",inputDate:new Date,mondayFirst:!0,templateType:"modal",showTodayButton:"true",modalHeaderColor:"bar-positive",modalFooterColor:"bar-positive",from:new Date(1910,8,2),to:new Date(2030,8,25),callback:function(e){u(e)}};var u=function(t){"undefined"==typeof t?console.log("No date selected"):(e.datepickerObject.inputDate=t,console.log("Selected date is : ",t))};showQueue=function(e){var t=n.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.postponeSchedule=function(){l.postponeSchedule({id:i.scheduleId,scheduleDate:c(e.datepickerObject.inputDate,"yyyy-MM-dd")},function(e){showQueue("延迟成功！");var t="tab/schedules";o.url(t)})}}]).controller("ScheduleDetailCtrl",["$scope","$timeout","$cookies","$stateParams","$filter","$location","doctorUtils","ddDoctorSchedulesServices",function(e,t,o,r,s,n,i,c){var a=(i.getCookies("ddybUserId"),i.getCookies("doctorId"));c.getDoctorSchedules({doctorId:a,beginDate:r.selectedDate,endDate:r.selectedDate},function(t){e.schedules=t.scheduleList}),e.doRefresh=function(){console.log("Refreshing!"),t(function(){c.getDoctorSchedules({doctorId:a,beginDate:r.selectedDate,endDate:r.selectedDate},function(t){e.schedules=t.scheduleList}),e.$broadcast("scroll.refreshComplete")},1e3)},e.showConfirmeRgister=function(e){var t=('<h4 style=" text-align:center;">'+s("dateTranfer")(sessionStorage.getItem("currentDate"))+e+"</h4>","tab/scheduleDoctorHospitals");n.url(t)}}]).controller("FunInformationCtrl",["$scope","$timeout","$cookies","$ionicHistory","$stateParams","$filter","$location","doctorUtils","ddUserServices","getRegisterByStatusServices",function(e,t,o,r,s,n,i,c,a,d){c.getCookies("ddybUserId"),c.getCookies("doctorId");e.$on("$ionicView.enter",function(t){e.goBack=function(){r.goBack(-1)},a.get({userId:s.userId},function(t){e.user=t.users[0]}),d.getRegisterByStatus({userId:s.userId,status:5},function(t){e.registersHistorys=t.registers,e.registersHistorys&&e.registersHistorys.length>0?e.showOrNot=!1:e.showOrNot=!0})})}]).controller("UserTransferCtrl",["$scope","$timeout","$cookies","$stateParams","$filter","$location","$ionicPopup","doctorUtils","ddUserServices","ddUserTransfersServices",function(e,t,o,r,s,n,i,c,a,d){var l=c.getCookies("ddybUserId");c.getCookies("doctorId");e.expanderTitle="账户明细",e.$on("$ionicView.enter",function(o){var s=e.vm={moredata:!0,transferList:[],pagination:{perPage:15,currentPage:1},afterInit:!1,init:function(){d.getUserTransfers({userId:l,type:r.transferType,size:s.pagination.perPage,page:s.pagination.currentPage},function(t){s.transferList=t.transfers,s.afterInit=!0,t.pages<=s.pagination.currentPage+1&&(s.moredata=!1),angular.forEach(s.transferList,function(t,o,r){a.get({userId:r[o].fromUserId},function(t){e.user=t.users[0],"0"==r[o].fromUserId?s.transferList[o].headImgUrl="http://www.yushansoft.com/dingdong/images/sys/score.png":s.transferList[o].headImgUrl=t.users[0].headImgUrl})}),s.transferList&&s.transferList.length>0?e.ctrlScope.showOrNot=!1:e.ctrlScope.showOrNot=!0})},doRefresh:function(){console.log("Refreshing!"),t(function(){d.getUserTransfers({userId:l,type:r.transferType,size:15,page:1},function(t){s.transferList=t.transfers,s.transferList&&s.transferList.length>0?e.ctrlScope.showOrNot=!1:e.ctrlScope.showOrNot=!0}),e.$broadcast("scroll.refreshComplete")},1e3)},loadMore:function(){s.pagination.currentPage+=1,s.moredata&&s.afterInit&&d.getUserTransfers({userId:l,type:r.transferType,size:s.pagination.perPage,page:s.pagination.currentPage},function(t){s.transferList=s.transferList.concat(t.transferList),t.transferList&&0==t.transferList.length&&(s.moredata=!1),t.pages<=s.pagination.currentPage+1&&(s.moredata=!1),e.$broadcast("scroll.infiniteScrollComplete")})}};s.init()}),showQueue=function(e){var t=i.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.showConfirme=function(e){showQueue("　1）什么是叮咚？<br/>        &nbsp;&nbsp;&nbsp;&nbsp;叮咚是叮咚医邦在线给予广大用户的虚拟货币的奖励，可以用于支付，直抵现金。                <br/>  &nbsp;&nbsp;&nbsp; 2）叮咚折抵现金比例是多少？<br/>        &nbsp;&nbsp;&nbsp;&nbsp; 叮咚折抵现金比例是100:1，100叮咚相当于1元人民币。")},e.showTransfer=function(t){d.getUserTransfers({userId:l,type:t,size:vm.pagination.perPage,page:vm.pagination.currentPage},function(o){vm.transferList=o.transferList,vm.transferType0="button",vm.transferType1="button","0"==t?(vm.transferType="余额账单",vm.transferType0="button activated"):(vm.transferType="积分账单",vm.transferType1="button activated"),angular.forEach(vm.transferList,function(t,o,r){a.get({userId:r[o].fromUserId},function(t){e.user=t.users[0],"0"==r[o].fromUserId?vm.transferList[o].headImgUrl="http://www.yushansoft.com/dingdong/images/sys/money_bag.png":vm.transferList[o].headImgUrl=t.users[0].headImgUrl})}),vm.transferList&&vm.transferList.length>0?e.ctrlScope.showOrNot=!1:e.ctrlScope.showOrNot=!0})}}]).controller("SmsValidCtrl",["$scope","$filter","$cookies","$ionicPopover","$location","$ionicPopup","$stateParams","doctorUtils","ddUserServices","ddSmsValiServices","ddUpdateSmsValiServices",function(e,t,o,r,s,n,i,c,a,d,l){e.ctrlScope=e;var u=c.getCookies("ddybUserId");c.getCookies("doctorId");a.get({userId:u},function(t){e.user=t.users[0],e.ctrlScope.phoneOld=t.users[0].phone});var p=60;showQueue=function(e){var t=n.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.ctrlScope.countdown="获取验证码",e.showConfirmeGetValid=function(t){var o=e.ctrlScope.mobileNo;if(null!=o){d.validNum({mobileNo:o},function(e){}),setTimeout(function(){clearInterval(r),e.ctrlScope.countdown="获取验证码",p=60},61e3);var r=setInterval(function(){"1"==p?(e.ctrlScope.countdown="获取验证码",e.ctrlScope.getValidDisable=!1):(p--,e.ctrlScope.countdown="重新发送（"+p+"）",e.ctrlScope.getValidDisable=!0),e.ctrlScope.$digest()},1e3)}else showQueue("请输入要验证的手机号码！")},e.showConfirmePutValid=function(t){var o=e.ctrlScope.mobileNo,r=e.ctrlScope.msgCode,i=1;null!=o?l.updateSmsValid({userId:u,mobileNo:o,msgCode:r,imgCode:i},function(t){if("1"==t.retMap.ok){var r='<h4 style=" text-align:center;">'+o+"</h4>",i=n.confirm({title:"<h4 >验证通过：</h4>",template:r,cancelText:"取消",okText:"确定"});i.then(function(t){if(t){a.get({userId:u},function(t){e.user=t.users[0],e.ctrlScope.phoneOld=t.users[0].phone}),console.log("完成");var o="/tab/smsValid";s.url(o)}else console.log("取消")})}else alert(t.retMap.msg)}):showQueue("请输入要验证的手机号码！")}}]).controller("SmsNowCtrl",["$scope","$filter","$cookies","$ionicPopover","$location","$ionicPopup","$stateParams","doctorUtils","ddUserServices","ddSmsValiServices","ddUpdateSmsValiServices",function(e,t,o,r,s,n,i,c,a,d,l){e.ctrlScope=e;var u=c.getCookies("ddybUserId");c.getCookies("doctorId");a.get({userId:u},function(t){e.user=t.users[0],e.ctrlScope.phoneOld=t.users[0].phone}),showQueue=function(e){var t=n.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.changePhone=function(e){var t="tab/smsValid";s.url(t)}}]).controller("SmsValidHomePageCtrl",["$scope","$cookies","$filter","$ionicPopover","$location","$ionicPopup","$stateParams","doctorUtils","ddUserServices","ddSmsValiServices","ddUpdateSmsValiServices","doctorInforList",function(e,t,o,r,s,n,i,c,a,d,l,u){e.ctrlScope=e;var p=c.getCookies("ddybUserId");c.getCookies("doctorId");a.get({userId:p},function(t){e.user=t.users[0],e.ctrlScope.phoneOld=t.users[0].phone});var g=60;showQueue=function(e){var t=n.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.ctrlScope.countdown="获取验证码",e.showConfirmeGetValid=function(t){var o=e.ctrlScope.mobileNo;if(null!=o){d.validNum({mobileNo:o},function(t){if("0"==t.retMap.ok)showQueue(t.retMap.msg);else{setTimeout(function(){clearInterval(o),e.ctrlScope.countdown="获取验证码",g=60},61e3);var o=setInterval(function(){"1"==g?(e.ctrlScope.countdown="获取验证码",e.ctrlScope.getValidDisable=!1):(g--,e.ctrlScope.countdown="重新发送（"+g+"）",e.ctrlScope.getValidDisable=!0),e.ctrlScope.$digest()},1e3)}})}else showQueue("请输入要验证的手机号码！")},e.showConfirmePutValid=function(t){var o=e.ctrlScope.mobileNo,r=e.ctrlScope.msgCode,n=1;null!=o?l.updateSmsValid({userId:p,mobileNo:o,msgCode:r,imgCode:n,mode:1},function(e){if("1"==e.retMap.ok&&e.retMap.doctorId){var t=e.retMap.doctorId,o=new Date,r=30;o.setTime(o.getTime()+24*r*60*60*1e3),c.setCookie("doctorId",t,o,"/",null),u.doctorId=t;var n="http://www.yushansoft.com/dingdong/v1/dddoctor/index.html#/tab/patientsAll";s.url(n),console.log("完成")}else showQueue("您还未入驻，请与客服联系！")}):showQueue("请输入要验证的手机号码！")}}]).controller("DoctorCodeCtrl",["$scope","$ionicPopup","$cookies","$ionicPopover","$ionicHistory","doctorUtils","ddDoctorInformationServices","ddUpdateDoctorInformationServices",function(e,t,o,r,s,n,i,c){var a=(n.getCookies("ddybUserId"),n.getCookies("doctorId"));e.ctrlScope=e,i.get({id:a},function(t){e.doctor=t.doctors[0],e.ctrlScope.name=t.doctors[0].name,e.ctrlScope.hospitalName=t.doctors[0].hospitalName,e.ctrlScope.level=t.doctors[0].level}),e.goBack=function(){s.goBack(-1)}}]).controller("AccountAllCtrl",["$scope","$ionicPopup","$ionicPopover","$timeout","$q","doctorUtils","ddUserServices","ddDoctorInformationServices","ddUpdateDoctorInformationServices","getUnSignedDoctorsServices","submitSignDoctorsterServices",function(e,t,o,r,s,n,i,c,a,d,l){var u=n.getCookies("ddybUserId"),p=n.getCookies("doctorId");e.ctrlScope=e;var g={name:""};e.doctor=g;getDoctorInfor=function(){if(e.doctor.name){var t=s.defer();return d.get({doctorName:e.doctor.name},function(e){t.resolve(e)}),t.promise}},e.$on("$ionicView.enter",function(t){p&&c.get({id:p},function(t){e.doctor=t.doctors[0],e.ctrlScope.name=t.doctors[0].name,e.ctrlScope.gender=t.doctors[0].gender,e.ctrlScope.level=t.doctors[0].level,i.get({userId:u},function(t){e.user=t.users[0],e.ctrlScope.phoneOld=t.users[0].phone,t.users[0].phone?(e.ctrlScope.verificationResult="已通过核验",e.ctrlScope.smsUrl="#/tab/smsNow"):(e.ctrlScope.verificationResult="未核验",e.ctrlScope.smsUrl="#/tab/smsValid")}),e.inforUrl="#/tab/personalInformation"})})}]).controller("ScoreCtrl",["$scope","$ionicPopup","$cookies","$ionicPopover","doctorUtils","ddUserServices",function(e,t,o,r,s,n){var i=(s.getCookies("ddybUserId"),s.getCookies("doctorId"));e.ctrlScope=e,e.$on("$ionicView.enter",function(t){n.get({userId:i},function(t){e.user=t.users[0],e.ctrlScope.score=t.users[0].score})})}]).controller("WxpayCtrl",["$scope","$ionicPopup","$cookies","$timeout","$stateParams","$ionicHistory","$ionicPopover","doctorUtils","ddUserTransfersServices","$window","ddUserServices",function(e,t,o,r,s,n,i,c,a,d,l){var u=c.getCookies("ddybUserId"),p=c.getCookies("doctorId");e.ctrlScope=e,e.expanderTitle="财富明细",e.$on("$ionicView.enter",function(t){e.goBack=function(){n.goBack(-1)},l.get({userId:u},function(t){e.user=t.users[0],e.ctrlScope.balance=t.users[0].balance,e.ctrlScope.score=t.users[0].score});var o=e.vm={moredata:!0,transferList:[],pagination:{perPage:15,currentPage:1},afterInit:!1,init:function(){a.getUserTransfers({userId:u,type:0,size:o.pagination.perPage,page:o.pagination.currentPage},function(t){o.transferList=t.transfers,o.afterInit=!0,t.pages<=o.pagination.currentPage+1&&(o.moredata=!1),angular.forEach(o.transferList,function(t,r,s){l.get({userId:s[r].fromUserId},function(t){e.user=t.users[0],"0"==s[r].fromUserId?o.transferList[r].headImgUrl="http://www.yushansoft.com/dingdong/images/sys/money_bag.png":o.transferList[r].headImgUrl=t.users[0].headImgUrl})}),o.transferList&&o.transferList.length>0?e.ctrlScope.showOrNot=!1:e.ctrlScope.showOrNot=!0})},doRefresh:function(){console.log("Refreshing!"),r(function(){a.getUserTransfers({userId:u,type:0,size:15,page:1},function(t){o.transferList=t.transfers,o.transferList&&o.transferList.length>0?e.ctrlScope.showOrNot=!1:e.ctrlScope.showOrNot=!0}),e.$broadcast("scroll.refreshComplete")},1e3)},loadMore:function(){o.pagination.currentPage+=1,o.moredata&&o.afterInit&&a.getUserTransfers({userId:u,type:s.transferType,size:o.pagination.perPage,page:o.pagination.currentPage},function(t){o.transferList=o.transferList.concat(t.transferList),t.transferList&&0==t.transferList.length&&(o.moredata=!1),t.pages<=o.pagination.currentPage+1&&(o.moredata=!1),e.$broadcast("scroll.infiniteScrollComplete")})}};o.init()}),e.doRefresh=function(){console.log("Refreshing!"),r(function(){l.get({userId:p},function(t){e.user=t.users[0],e.ctrlScope.balance=t.users[0].balance}),e.$broadcast("scroll.refreshComplete")},1e3)},e.showConfirmeCharge=function(e){var t="http://www.yushansoft.com/dingdong/sys/wxpay/tab-wxpay.html";d.open(t)}}]).controller("AccountCtrl",["$scope",function(e){e.settings={enableFriends:!0}}]).controller("AccountListCtrl",["$scope","$ionicPopup","$cookies","$timeout","$rootScope","$stateParams","$ionicPopover","$location","$ionicHistory","doctorUtils","ddDeleteDoctorAccountServices","ddDoctorAccountsServices","doctorInforList",function(e,t,o,r,s,n,i,c,a,d,l,u,p){var g=d.getCookies("ddybUserId");d.getCookies("doctorId");e.ctrlScope=e,e.$on("$ionicView.enter",function(t){u.getDoctorAccounts({userId:g},function(t){e.ctrlScope.accounts=t.accounts}),e.goBack=function(){a.goBack(-1)},e.ctrlScope.getAccount=function(e){n.operationType&&"getCard"==n.operationType&&(p.card=e,a.goBack(-1))}}),e.doRefresh=function(){console.log("Refreshing!"),r(function(){u.getDoctorAccounts({userId:g},function(t){e.ctrlScope.accounts=t.accounts}),e.$broadcast("scroll.refreshComplete")},1e3)},e.showConfirmeAdd=function(e){var t="tab/addAccount";c.url(t)},e.remove=function(t){l.deleteDoctorAccount({id:t.id},function(t){u.getDoctorAccounts({userId:g},function(t){e.ctrlScope.accounts=t.accounts})}),console.log("完成")}}]).controller("doctorRecommendCtrl",["$scope","$ionicPopup","$cookies","$timeout","$rootScope","$stateParams","$ionicPopover","$location","$ionicHistory","doctorUtils","inviteDoctorQrServices",function(e,t,o,r,s,n,i,c,a,d,l){var u=(d.getCookies("ddybUserId"),d.getCookies("doctorId"));e.ctrlScope=e,e.$on("$ionicView.enter",function(t){e.ctrlScope.inviteDoctorQr="http://www.yushansoft.com/dingdong/ddyb/inviteDoctorQr/"+u})}]).controller("assistantDoctorCtrl",["$scope","$cookies","$timeout","$filter","$ionicPopover","$location","$ionicPopup","$stateParams","doctorUtils","ddUserServices","ddDoctorInformationServices",function(e,t,o,r,s,n,i,c,a,l,u){var p=a.getCookies("ddyzUserId");e.$on("$ionicView.enter",function(t){a.setCookie("ddybUserId","",null,"/",null),a.setCookie("doctorId","",null,"/",null),l.get({userId:p},function(t){e.user=t.users[0];var o=t.users[0].assistantDoctors;if(o)for(var r=o.split(","),s=[],n=0;n<r.length;n++)u.get({id:r[n]},function(e){s.push(e.doctors[0])});e.assistantDoctorList=s})}),e.doRefresh=function(){console.log("Refreshing!"),o(function(){l.get({userId:p},function(t){e.user=t.users[0];var o=t.users[0].assistantDoctors;if(o)for(var r=o.split(","),s=[],n=0;n<r.length;n++)u.get({id:r[n]},function(e){s.push(e.doctors[0])});e.assistantDoctorList=s}),e.$broadcast("scroll.refreshComplete")},1e3)},e.showDoctorFunction=function(e){a.setCookie("ddybUserId",e.userId,d,"/",null),a.setCookie("doctorId",e.id,d,"/",null);var t="/doctorFunction";n.url(t)}}]).controller("doctorHeadCtrl",["$scope","$ionicActionSheet","$timeout","$cookies","$q","doctorUtils","ddDoctorInformationServices","ddJsConfig","ddAddYusFilesServices","showPopupServices","ddUpdateDoctorHeadServices",function(e,t,o,r,s,n,i,c,a,d,l){e.ctrlScope=e;var u=n.getCookies("ddybUserId"),p=n.getCookies("doctorId"),g=[];e.yusFiles=g;var m=!1;wx.ready(function(e){m=!0}),m||n.wxInit();var f=function(e){var t=s.defer();return t.resolve(e),t.promise},h=function(e){wx.uploadImage({localId:e,isShowProgressTips:1,success:function(e){f(e).then(function(e){var t=e.serverId;a.save({},{userId:u,wxServerId:t},function(e){if("OK"==e.responseDesc){g=e.yusFiles[0].id;var t=e.yusFiles[0].fileUrl,o={doctors:[{id:p,headImgUrl:t}],requestDesc:"string",requestStatus:0};t&&l.updateDoctorHead({id:p},o)}else d.showAlert(e.responseDesc)})})}})};e.wxUpload=function(){g=[],g.length<=1&&wx.ready(function(){wx.chooseImage({count:1-g.length,success:function(t){for(var o=t.localIds.length,r=0;o>r;r++){var s=t.localIds[r];h(s),g.push(s)}e.ctrlScope.yusFiles=g,e.$digest()}})})},e.$on("$ionicView.enter",function(t){p&&i.get({id:p},function(t){e.doctor=t.doctors[0]})})}]).controller("AddAccountCtrl",["$scope","$filter","$location","$cookies","$ionicPopover","$ionicPopup","$stateParams","ddAddDoctorAccountsServices",function(e,t,o,r,s,n,i,c){e.ctrlScope=e,showQueue=function(e){var t=n.alert({template:"<h3>"+e+"</h3>",buttons:[{text:"确定"}]});t.then(function(t){console.log(e)})},e.showConfirmeAdd=function(t){if(null==e.ctrlScope.bankName||null==e.ctrlScope.cardNumber||null==e.ctrlScope.cardName)showQueue("请补充完必填项信息！");else{var s='<h4 style=" text-align:center;">'+e.ctrlScope.bankName+"<br/>"+e.ctrlScope.cardNumber+"<br/>"+e.ctrlScope.cardName+"</h4>",i=n.confirm({title:"<h4 >您确定添加如下账户吗？</h4>",template:s,cancelText:"取消",okText:"确定"});i.then(function(t){if(t){var s=e.ddybUserId=r.get("ddybUserId"),n=(e.doctorId=r.get("doctorId"),{accounts:[{bankAddress:e.ctrlScope.bankAddress,bankBranchName:e.ctrlScope.bankBranchName,bankName:e.ctrlScope.bankName,cardName:e.ctrlScope.cardName,cardNumber:e.ctrlScope.cardNumber,userId:s}],requestDesc:"string",requestStatus:0});c.addDoctorAccounts({},n),console.log(n);var i="tab/accountList";o.url(i)}else console.log("取消")})}}}]);var dddoctorDirectives=angular.module("dddoctorDirectives",["ui.rCalendar"]);dddoctorDirectives.directive("compare",["$ngModel",function(e){return{link:function(e,t,o,r){r.$parsers.unshift(function(e){return console.log("viewValue:%s",e),console.log("attrs.compare:%s",o.compare),""==e||""==o.compare||e==o.compare?r.$setValidity("compare",!0):r.$setValidity("compare",!1),e})}}}]),dddoctorDirectives.directive("ngScroll",function(){return{link:function(e,t,o,r){$(t).mCustomScrollbar({scrollButtons:{enable:!0}})}}}),dddoctorDirectives.directive("errSrc",function(){return{restrict:"EA",replace:!0,link:function(e,t,o){o.ngSrc||o.$set("src",o.errSrc)}}}),dddoctorDirectives.directive("ddexpander",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{expanderTitle:"=expanderTitle"},template:'<div><div class="item item-divider" ng-click="toggle()">{{expanderTitle}}</div><div class="body" ng-show="showMe" ng-transclude></div></div>',link:function(e,t,o){e.showMe=!0,e.toggle=function(){e.showMe=!e.showMe}}}}),dddoctorDirectives.directive("star",[function(){return{restrict:"EACM",scope:{ratingValue:"=",max:"=",readonly:"@",onHover:"=",onLeave:"=",starstyle:"@",starrealstyle:"@",startext:"@"},template:'<ul ng-class="getStarCss()" ng-mouseleave="leave(val)"> <a style="font-size: 0.9em;color: #4d4d4d">{{startext}}</a><li ng-repeat="star in stars" style="margin:1px;display:inline;cursor:pointer;"   ng-class="star" ng-click="click($index + 1)" ng-mouseover="over($index + 1)"   >★</li></ul>',link:function(e,t,o,r){t.css("text-align","center"),e.ratingValue=e.ratingValue||0,e.starstyle=e.starstyle||"rating",e.startext=e.startext||"",e.max=e.max||5,e.starrealstyle=e.starrealstyle||"starsmall",e.click=function(t){e.readonly&&"true"===e.readonly||(e.ratingValue=t)},e.over=function(t){e.onHover(t)},e.leave=function(t){e.onLeave(t)},e.getStarCss=function(){return e.starstyle},e.getRealStar=function(){return e.starrealstyle};var s=function(){e.stars=[];for(var t=0;t<e.max;t++)e.stars.push({filled:t<e.ratingValue})};s(),e.$watch("ratingValue",function(e,t){t&&s()}),e.$watch("max",function(e,t){t&&s()})}}}]);var dddoctorServices=angular.module("dddoctorServices",["ngResource"]),serverName="www.yushansoft.com";dddoctorServices.factory("doctorInforList",[function(){return{}}]),dddoctorServices.factory("doctorUtils",["ddJsConfig",function(e){var t={getCookies:function(e){for(var t=document.cookie,o=t.split("; "),r=0;r<o.length;r++){var s=o[r].split("=");if(e==s[0])return s[1]}return""},setCookie:function(e,t,o,r,s,n){document.cookie=e+"="+escape(t)+(o?"; expires="+o.toGMTString():"")+(r?"; path="+r:"")+(s?"; domain="+s:"")+(n?"; secure":"")},wxInit:function(){var t=window.location.href;t=t.substring(0,t.indexOf("#")),e.jsConfig({url:t},function(e){var t=e;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","chooseImage","previewImage","uploadImage","downloadImage","chooseWXPay"]})})}};return t}]),dddoctorServices.factory("ddJsConfig",["$resource","$http","$q",function(e){return e("http://"+serverName+"/dingdong/ddmz/jsConfig",{},{jsConfig:{method:"GET",params:{url:"@url"},isArray:!1}})}]),dddoctorServices.factory("ddQr",["$resource","$http","$q",function(e){return e("http://"+serverName+"/dingdong/ddmz/qr/:id",{id:"@id"},{getQr:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("inviteDoctorQrServices",["$resource","$http","$q",function(e){return e("http://"+serverName+"/dingdong/ddyb/inviteDoctorQr/:id",{id:"@id"},{getInviteDoctorQr:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("ddAddYusFilesServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/yusFiles",{userId:"@userId",wxServerId:"@wxServerId"})}]),dddoctorServices.factory("ddRegistersServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/registers/:id",{id:"@id"},{})}]),dddoctorServices.factory("ddPatientServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/doctors/:id/registers/scheduleDate",{id:"@id"},{queryMyPatient_Hos_Date:{method:"GET",params:{scheduleDate:"@scheduleDate"},isArray:!1}})}]),dddoctorServices.factory("ddPatientRegistersServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/doctors/:id/registers/unfinished",{id:"@id"},{queryDoctor_Registers:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("ddPatientHistoryServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/doctors/:id/registers/status",{id:"@id"},{queryHistory_Registers:{method:"GET",params:{status:"@status"},isArray:!1}})}]),dddoctorServices.factory("ddPatientDetailServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/patients/:patientId",{patientId:"@patientId"},{})}]),dddoctorServices.factory("ddPatientCondServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/patientConds/patientConds/:registerId",{registerId:"@registerId"},{getByRegisterId:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("ddPatientFinishTreatmentServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/registers/:registerId/finish",{registerId:"@registerId"},{finishTreatment:{method:"PATCH",params:{},isArray:!1}})}]),dddoctorServices.factory("ddDoctorHospitalsServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/docotors/:doctorId/doctorHospitals",{doctorId:"@doctorId"},{getDoctorHospitals:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("ddDoctorHospitalsByStatusServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/docotors/:doctorId/doctorHospitals",{doctorId:"@doctorId"},{getDoctorByStatusHospitals:{method:"GET",params:{status:"@status"},isArray:!1}})}]),dddoctorServices.factory("ddDoctorHospitalDetailServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/doctorHospitals/:id",{id:"@id"},{})}]),dddoctorServices.factory("ddAddScheduleServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/schedules",null,{addSchedule:{method:"POST",params:{doctorId:"@doctorId",hospitalId:"@hospitalId",scheduleDate:"@scheduleDate",timeSlot:"@timeSlot",issueNum:"@issueNum",creatorId:"@creatorId"}}})}]),dddoctorServices.factory("ddAddDoctorHospitalServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctorHospitals",null,{addDoctorHospital:{method:"POST"}})}]),dddoctorServices.factory("ddUpdateDoctorHospitalServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctorHospitals/:id",{id:"@id"},{updateDoctorHospital:{method:"PATCH",params:{deptName:"@deptName",minQueue:"@minQueue",registerFee:"@registerFee",status:"@status"}}})}]),dddoctorServices.factory("ddUpdateDoctorHospitalStatusServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctorHospitals/:id/status",{id:"@id"},{updateDoctorHospitalStatus:{method:"PATCH",params:{status:"@status"}}})}]),dddoctorServices.factory("ddDeleteDoctorHospitalServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctorHospitals/:id",null,{deleteDoctorHospital:{method:"DElETE",params:{id:"@id"}}})}]),dddoctorServices.factory("ddDoctorSchedulesServices",["$resource","$http","$q",function(e,t,o){return e("http://"+serverName+"/dingdong/doctors/:doctorId/schedules",{doctorId:"@doctorId"},{getDoctorSchedules:{method:"GET",params:{beginDate:"@beginDate",endDate:"@endDate"},isArray:!1
}})}]),dddoctorServices.factory("ddDoctorScheduleDatesServices",["$resource","$http","$q",function(e,t,o){return e("http://"+serverName+"/dingdong/doctors/:doctorId/scheduleDates",{doctorId:"@doctorId"},{getDoctorScheduleDates:{method:"GET",params:{beginDate:"@beginDate",endDate:"@endDate"},isArray:!1}})}]),dddoctorServices.factory("ddSmsValiServices",["$resource","$http","$q",function(e,t,o){return e("http://"+serverName+"/dingdong/sms/validNum",{},{validNum:{method:"GET",params:{mobileNo:"@mobileNo"},isArray:!1}})}]),dddoctorServices.factory("ddUpdateSmsValiServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/sms/validation",null,{updateSmsValid:{method:"PUT",params:{userId:"@userId",mobileNo:"@mobileNo",msgCode:"@msgCode",imgCode:"@imgCode",mode:"@mode"}}})}]),dddoctorServices.factory("ddUpdateDoctorHeadServices",["$resource",function(e){return e("http://"+serverName+"/doctors/:id/bySelective",{id:"@id"},{updateDoctorHead:{method:"PUT"}})}]),dddoctorServices.factory("ddDoctorFansServices",["$resource","$http","$q",function(e,t,o){return e("http://"+serverName+"/dingdong/docotors/:doctorId/doctorFans",{doctorId:"@doctorId"},{getDoctorFans:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("ddDoctorInformationServices",["$resource","$http","$q",function(e,t,o){return e("http://"+serverName+"/dingdong/doctors/:id",{id:"@id"},{})}]),dddoctorServices.factory("ddUpdateDoctorInformationServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctors/:id",{id:"@id"},{updateDoctorInformation:{method:"PUT",params:{name:"@name",gender:"@gender",hospitalName:"@hospitalName",level:"@level",specialty:"@specialty",introduction:"@introduction"}}})}]),dddoctorServices.factory("ddGetDoctorQueuesServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctors/:doctorId/statQueue",{doctorId:"@doctorId"},{getDoctorQueues:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("ddDoctorQueuesListServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctors/:doctorId/queues",{doctorId:"@doctorId"},{getDoctorQueuesList:{method:"GET",params:{hospitalId:"@hospitalId"},isArray:!1}})}]),dddoctorServices.factory("ddRegistersByDoctorIdAndStatusServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/doctors/:doctorId/hospitals/:hospitalId/registers/status",{doctorId:"@doctorId"},{getRegistersByDoctorIdAndStatus:{method:"GET",params:{hospitalId:"@hospitalId",status:"@status"},isArray:!1}})}]),dddoctorServices.factory("ddUserServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/users/:userId",{userId:"@userId"},{})}]),dddoctorServices.factory("getRegisterByStatusServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/users/:userId/registers/status",{userId:"@userId"},{getRegisterByStatus:{method:"GET",params:{status:"@status"},isArray:!1}})}]),dddoctorServices.factory("ddGetDoctorFunsServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/docotors/:doctorId/doctorFans",{},{getDoctorFuns:{method:"GET",params:{doctorId:"@doctorId",size:"@size",page:"@page",order:"@order",orderBy:"@orderBy"}}})}]),dddoctorServices.factory("ddPostponeScheduleByIdServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/schedules/:id/postponeScheduleById",{id:"@id"},{postponeScheduleById:{method:"PATCH",params:{}}})}]),dddoctorServices.factory("ddPostponeScheduleServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/schedules/:id/postponeSchedule",{id:"@id"},{postponeSchedule:{method:"PATCH",params:{scheduleDate:"@scheduleDate"}}})}]),dddoctorServices.factory("ddUserTransfersServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/users/:userId/Transfers",{userId:"@userId"},{getUserTransfers:{method:"GET",params:{type:"@type",size:"@size",page:"@page"},isArray:!1}})}]),dddoctorServices.factory("ddHospitalsServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/hospitals",{},{getHospitals:{method:"GET",params:{size:"@size",page:"@page",order:"@order",orderBy:"@orderBy"}}})}]),dddoctorServices.factory("ddHospitalsByFilterTextServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/hospitals",{},{getHospitalsByFilterText:{method:"GET",params:{filterText:"@filterText",size:"@size",page:"@page",order:"@order",orderBy:"@orderBy"}}})}]),dddoctorServices.factory("ddHospitalDeptsServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/hospitals/:id/hospitalDepts",{id:"@id"},{getHospitalDepts:{method:"GET",params:{size:"@size",page:"@page"}}})}]),dddoctorServices.factory("getDoctorEvalsByRegisterServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/registers/:registerId/doctorEvals",{registerId:"@registerId"},{getDoctorEvalsByRegisterId:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("getUnSignedDoctorsServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/doctors/unsigned",{},{getUnSignedDoctors:{method:"GET",params:{doctorName:"@doctorName"},isArray:!1}})}]),dddoctorServices.factory("submitSignDoctorsterServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/doctors/:id/submitSignDoctor",{id:"@id"},{submitSign:{method:"PATCH",params:{userId:"@userId",officeTele:"@officeTele"},isArray:!1}})}]),dddoctorServices.factory("doctorServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/doctors/:id",null,{queryAll:{method:"get",params:{size:"@size",page:"@number",orderBy:"@orderBy",order:"@order"},isArray:!1}})}]),dddoctorServices.factory("ddGetDoctorsByNameOrSpecialty",["$resource","$http",function(e){return e("http://"+serverName+"/dingdong/doctors",{},{getDoctorsByNameOrSpecialty:{method:"GET",params:{filterText:"@filterText",size:"@size",page:"@page",order:"@order",orderBy:"@orderBy"},isArray:!1}})}]),dddoctorServices.factory("ddAddDoctorAccountsServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/accounts",null,{addDoctorAccounts:{method:"POST"}})}]),dddoctorServices.factory("ddDoctorAccountsServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/accounts/:userId/userId",{userId:"@userId"},{getDoctorAccounts:{method:"GET",params:{},isArray:!1}})}]),dddoctorServices.factory("ddDeleteDoctorAccountServices",["$resource","$q",function(e,t){return e("http://"+serverName+"/dingdong/accounts/:id",null,{deleteDoctorAccount:{method:"DElETE",params:{id:"@id"}}})}]),dddoctorServices.factory("ddDoctorCashApplyServices",["$resource",function(e){return e("http://"+serverName+"/dingdong/transfers/getCashApply",{},{postCashApply:{method:"POST",params:{accountId:"@accountId",amount:"@amount"}}})}]),dddoctorServices.factory("showPopupServices",["$ionicPopup",function(e){var t={showPopup:function(){var t=e.show({template:'<input type="password" ng-model="data.wifi">',title:"Enter Wi-Fi Password",subTitle:"Please use normal things",scope:$scope,buttons:[{text:"取消"},{text:"<b>确定</b>",type:"button-stable",onTap:function(e){return $scope.data.wifi?$scope.data.wifi:void e.preventDefault()}}]});t.then(function(e){console.log("Tapped!",e)}),$timeout(function(){t.close()},3e3)},showConfirm:function(t,o,r){var s=e.confirm({title:t,template:o,cancelText:"取消",okText:"确定"});s.then(function(e){e&&r()})},showAlert:function(t,o){var r=e.alert({title:t,template:o,buttons:[{text:"确定"}]});r.then(function(e){})}};return t}]);var dddoctorFilters=angular.module("dddoctorFilters",[]);dddoctorFilters.filter("titleCase",function(){var e=function(e){for(var t=e.split(" "),o=0;o<t.length;o++)t[o]=t[o].charAt(0).toUpperCase()+t[o].slice(1);return t.join(" ")};return e}),dddoctorFilters.filter("dateFormat1",function(){var e=function(e){var t=new Date(e),o=t.getFullYear(),r=t.getMonth()+1,s=t.getDate(),n=o+"."+r+"."+s;return n};return e}),dddoctorFilters.filter("dateFormatAge",function(){var e=function(e){var t=new Date,o=t.getFullYear(),r=new Date(e),s=r.getFullYear(),n=o-s;return n};return e}),dddoctorFilters.filter("dateFormatAge1",function(){var e=function(e){var t="";if(e&&18==e.length){t=e.substring(6,10);var o=(e.substring(10,12),e.substring(12,14),new Date),r=o.getFullYear(),s=r-t;return s}return"*"};return e}),dddoctorFilters.filter("timeSlot",function(){var e=function(e){var t="全天";return"1"==e?t="上午":"2"==e?t="下午":"3"==e&&(t="晚上"),t};return e}),dddoctorFilters.filter("gender",function(){var e=function(e){var t="未知";return"1"==e?t="男":"2"==e&&(t="女"),t};return e}),dddoctorFilters.filter("queueStatus",function(){var e=function(e){var t="排队中";return t="1"==e?"http://www.yushansoft.com/dingdong/images/doctors/queue.png":""};return e}),dddoctorFilters.filter("dateTranfer",function(){var e=function(e){var t=new Date(e),o=t.getMonth()+1,r=t.getFullYear()+"年"+o+"月"+t.getDate()+"日星期"+"日一二三四五六".charAt(t.getDay())+"<br/><br/>";return r};return e}),dddoctorFilters.filter("registerStatus",function(){var e=function(e){var t="排队中";return"0"==e?t="草稿":"1"==e?t="已预约":"2"==e?t="已挂号":"3"==e?t="已诊疗":"4"==e?t="已取消":"5"==e&&(t="已评价"),t};return e}),dddoctorFilters.filter("hospitalFilter",function(){var e=function(e){var t=!0;return t="1"==e};return e}),dddoctorFilters.filter("hospitalRevFilter",function(){var e=function(e){var t=1;return 1==e?t=1:0==e&&(t=0),t};return e}),dddoctorFilters.filter("transferStatus",function(){var e=function(e){var t="";return"0"==e&&(t="(交易中)"),t};return e});